---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import AudioModal from '../components/AudioModal.astro';

const contactInfo = {
    email: "contacto@inled.es"
};
---

<Layout
  title="Contacto - Inled Group"
  description="¿Alguna duda? Resuélvela con nosotros."
>
  <AudioModal />
  <Header />

  <div class="page-hero">
    <div class="hero-content">
      <h1 class="hero-title">¿Hablamos?</h1>
      <p class="hero-description">
        Contacta con nosotros
      </p>
    </div>
  </div>


<div class="captcha-wrapper">
  <div class="captcha-container">
        <div class="captcha-header">
            <i class="fas fa-shield-alt"></i>
            <h3>Verificación de Seguridad</h3>
        </div>

        <div class="captcha-content">
            <div class="challenge-section">
                <div class="challenge-title">
                    <i class="fas fa-tasks"></i>
                    Completa el desafío
                </div>
                
                <div class="slider-challenge">
                    <div class="slider-instruction">
                        Desliza hasta la posición <span class="target-value" id="targetValue">85</span> que marca la flecha roja
                    </div>
                    
                    <div class="slider-container">
                        <input type="range" min="0" max="100" value="0" class="slider" id="captchaSlider">
                        <div class="target-indicator" id="targetIndicator"></div>
                    </div>
                    
                    <div class="slider-info">
                        <div class="current-value">Posición: <span id="currentValue">0</span></div>
                        <div class="status pending" id="status">
                            <i class="fas fa-clock"></i>
                            Pendiente
                        </div>
                    </div>
                </div>
            </div>

            <div class="revealed-data" id="revealedData">
                <div class="revealed-title">
                    <i class="fas fa-unlock"></i>
                    Información de contacto
                </div>
                
                <div class="revealed-item">
                    <div class="revealed-label">
                        <i class="fas fa-envelope"></i>
                        Email
                    </div>
                    <div class="revealed-value" id="decodedEmail"></div>
                </div>

                <div class="success-message">
                    <i class="fas fa-check-circle"></i>
                    Verificación completada exitosamente
                </div>
            </div>
        </div>

        <div class="captcha-footer">
            <div class="recaptcha-branding">
                <div class="recaptcha-logo">im</div>
                <span>imhuman</span>
            </div>
        </div>
    </div>
  </div>
</div>
<style>
  .captcha-wrapper {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    padding: 2rem;
  }

  .captcha-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url('https://hosted.inled.es/better.inled.svg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    filter: brightness(0.5);
    z-index: -2;
  }

  .captcha-wrapper::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0.5) 100%
    );
    z-index: -1;
  }
</style>
<style>



    .captcha-container {
        background: white;
        border: 1px solid #dadce0;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 0;
        max-width: 400px;
        width: 100%;
        overflow: hidden;
    }

    .captcha-header {
        background: #f8f9fa;
        border-bottom: 1px solid #dadce0;
        padding: 16px 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .captcha-header i {
        color: #1a73e8;
        font-size: 20px;
    }

    .captcha-header h3 {
        color: #202124;
        font-size: 16px;
        font-weight: 500;
        margin: 0;
    }

    .captcha-content {
        padding: 20px;
    }

    .challenge-section {
        margin-bottom: 24px;
    }

    .challenge-title {
        color: #202124;
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .challenge-title i {
        color: #5f6368;
        font-size: 16px;
    }

    .slider-challenge {
        background: #f8f9fa;
        border: 1px solid #dadce0;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
    }

    .slider-instruction {
        color: #5f6368;
        font-size: 13px;
        margin-bottom: 12px;
        text-align: center;
    }

    .target-value {
        font-weight: 600;
        color: #1a73e8;
    }

    .slider-container {
        position: relative;
        margin: 16px 0;
    }

    .slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        outline: none;
        -webkit-appearance: none;
        cursor: pointer;
        background: #dadce0;
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #1a73e8;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        border: none;
        transition: all 0.2s ease;
    }

    .slider::-webkit-slider-thumb:hover {
        background: #1557b0;
        transform: scale(1.1);
    }

    .slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #1a73e8;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        border: none;
    }

    .target-indicator {
        position: absolute;
        top: -2px;
        width: 2px;
        height: 10px;
        background: #ea4335;
        border-radius: 1px;
        transform: translateX(-50%);
    }

    .slider-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        font-size: 12px;
    }

    .current-value {
        color: #5f6368;
    }

    .status {
        font-weight: 500;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .status.pending {
        background: #fef7e0;
        color: #f9ab00;
    }

    .status.verified {
        background: #e8f5e8;
        color: #137333;
    }

    .protected-data {
        background: #f8f9fa;
        border: 1px solid #dadce0;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
    }

    .data-title {
        color: #202124;
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .data-title i {
        color: #5f6368;
    }

    .data-item {
        background: white;
        border: 1px solid #e8eaed;
        border-radius: 4px;
        padding: 12px;
        margin-bottom: 8px;
    }

    .data-item:last-child {
        margin-bottom: 0;
    }

    .data-label {
        font-size: 12px;
        color: #5f6368;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .encoded-data {
        font-family: 'Courier New', monospace;
        font-size: 11px;
        color: #202124;
        word-break: break-all;
        background: #f8f9fa;
        padding: 6px;
        border-radius: 4px;
    }

    .revealed-data {
        background: #e8f5e8;
        border: 1px solid #34a853;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
        display: none;
        animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .revealed-title {
        color: #137333;
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .revealed-item {
        background: white;
        border: 1px solid #34a853;
        border-radius: 4px;
        padding: 12px;
        margin-bottom: 8px;
    }

    .revealed-item:last-child {
        margin-bottom: 0;
    }

    .revealed-label {
        font-size: 12px;
        color: #137333;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .revealed-value {
        font-size: 14px;
        color: #137333;
        font-weight: 500;
    }

    .captcha-footer {
        background: #f8f9fa;
        border-top: 1px solid #dadce0;
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .recaptcha-branding {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 11px;
        color: #5f6368;
    }

    .recaptcha-logo {
        width: 16px;
        height: 16px;
        background: #1a73e8;
        border-radius: 2px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 8px;
        font-weight: bold;
    }

    .reset-btn {
        background: transparent;
        border: 1px solid #dadce0;
        color: #1a73e8;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .reset-btn:hover {
        background: #f8f9fa;
        border-color: #1a73e8;
    }

    .success-message {
        background: #e8f5e8;
        border: 1px solid #34a853;
        border-radius: 4px;
        padding: 12px;
        margin-top: 12px;
        text-align: center;
        font-size: 13px;
        color: #137333;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
    }
    .success-message i {
        font-size: 16px;
    }

</style>
<script>
    // Datos codificados en Base64
    const encodedData = {
        email: 'Y29udGFjdG9AaW5sZWQuZXM=',
    };

    // Elementos del DOM
    const slider = document.getElementById('captchaSlider') as HTMLInputElement;
    const currentValueSpan = document.getElementById('currentValue') as HTMLElement;
    const statusElement = document.getElementById('status') as HTMLElement;
    const targetValueSpan = document.getElementById('targetValue') as HTMLElement;
    const targetIndicator = document.getElementById('targetIndicator') as HTMLElement;
    const revealedData = document.getElementById('revealedData') as HTMLElement;
    const decodedEmail = document.getElementById('decodedEmail') as HTMLElement;

    // Variables del captcha
    let targetValue = generateRandomTarget();
    let captchaCompleted = false;
    let holdTimer: number | null = null;
    let holdStart: number | null = null;
    const holdDuration = 2000; // 2 segundos

    function generateRandomTarget() {
        return Math.floor(Math.random() * 20) + 75; // Entre 75-95
    }

    function decodeBase64(encodedString: string) {
        try {
            return atob(encodedString);
        } catch (error) {
            return 'Error al decodificar';
        }
    }

    function updateTargetIndicator() {
        if (targetIndicator && targetValueSpan) {
            targetIndicator.style.left = targetValue + '%';
            targetValueSpan.textContent = targetValue.toString();
        }
    }

    function verifyCaptcha(sliderValue: number) {
        const tolerance = 3;
        const isCorrect = Math.abs(sliderValue - targetValue) <= tolerance;

        if (!statusElement || !slider) return;

        if (isCorrect && !captchaCompleted) {
            if (!holdTimer) {
                statusElement.innerHTML = '<i class="fas fa-hourglass-half"></i> Mantén la posición 2s...';
                statusElement.className = 'status pending';
                holdStart = Date.now();
                holdTimer = window.setTimeout(() => {
                    captchaCompleted = true;
                    statusElement.innerHTML = '<i class="fas fa-check-circle"></i> Verificado';
                    statusElement.className = 'status verified';
                    slider.style.background = `linear-gradient(to right, #34a853 0%, #34a853 ${sliderValue}%, #dadce0 ${sliderValue}%, #dadce0 100%)`;
                    if (decodedEmail) decodedEmail.textContent = decodeBase64(encodedData.email);
                    if (revealedData) revealedData.style.display = 'block';
                }, holdDuration);
            }
        } else {
            if (holdTimer) {
                clearTimeout(holdTimer);
                holdTimer = null;
                holdStart = null;
            }
            if (captchaCompleted) {
                captchaCompleted = false;
                if (revealedData) revealedData.style.display = 'none';
            }
            statusElement.innerHTML = '<i class="fas fa-clock"></i> Pendiente';
            statusElement.className = 'status pending';
            slider.style.background = `linear-gradient(to right, #1a73e8 0%, #1a73e8 ${sliderValue}%, #dadce0 ${sliderValue}%, #dadce0 100%)`;
        }
    }

    function updateSlider() {
        if (!slider || !currentValueSpan) return;
        
        const sliderValue = parseInt(slider.value);
        currentValueSpan.textContent = sliderValue.toString();

        const color = captchaCompleted ? '#34a853' : '#1a73e8';
        slider.style.background = `linear-gradient(to right, ${color} 0%, ${color} ${sliderValue}%, #dadce0 ${sliderValue}%, #dadce0 100%)`;

        verifyCaptcha(sliderValue);
    }

    function resetCaptcha() {
        if (!slider || !currentValueSpan || !statusElement || !revealedData) return;

        slider.value = '0';
        captchaCompleted = false;
        targetValue = generateRandomTarget();

        currentValueSpan.textContent = '0';
        statusElement.innerHTML = '<i class="fas fa-clock"></i> Pendiente';
        statusElement.className = 'status pending';
        revealedData.style.display = 'none';

        if (holdTimer) {
            clearTimeout(holdTimer);
            holdTimer = null;
            holdStart = null;
        }

        updateTargetIndicator();
        updateSlider();
    }

    // Event listeners
    if (slider) {
        slider.addEventListener('input', updateSlider);
    }

    // Inicialización
    updateTargetIndicator();
    updateSlider();

</script>

 


</Layout>

<style>
  .page-hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    padding: 2rem;
  }

  .page-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url('https://hosted.inled.es/better.inled.svg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    filter: brightness(0.7);
    z-index: -2;
  }

  .page-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.2) 0%,
      rgba(0, 0, 0, 0.4) 100%
    );
    z-index: -1;
  }

  .hero-content {
    position: relative;
    z-index: 1;
    text-align: center;
    max-width: 800px;
  }

  .hero-title {
    font-size: clamp(3rem, 8vw, 7rem);
    font-weight: 800;
    margin-bottom: 1.5rem;
    line-height: 1.1;
    letter-spacing: -0.02em;
    background-image: url('https://hosted.inled.es/better.inled.svg');
    background-size: cover;
    background-position: center;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: saturate(2) brightness(1.3) contrast(1.2) drop-shadow(0 0 40px rgba(255, 255, 255, 0.3));
  }

  .hero-description {
    font-size: clamp(1.1rem, 2vw, 1.5rem);
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
    max-width: 600px;
    margin: 0 auto;
  }

  .services-wrapper {
    padding: 2rem 0;
  }

  .pricing-section {
    padding: 4rem 2rem;
    max-width: 1600px;
    margin: 0 auto;
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    align-items: stretch;
  }

  .footer-cta {
    padding: 6rem 2rem;
    background: rgba(255, 255, 255, 0.03);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 4rem;
  }

  .footer-cta-content {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
  }

  .footer-cta h2 {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1rem;
    color: white;
  }

  .footer-cta p {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 2rem;
  }

  .email-link {
    display: inline-block;
    padding: 1.25rem 3rem;
    background: transparent;
    color: white;
    text-decoration: none;
    border-radius: 50px;
    font-size: 1.25rem;
    font-weight: 600;
    transition: all 0.4s ease;
    border: 1px solid rgba(255, 255, 255, 0.8);
    position: relative;
    overflow: hidden;
    z-index: 1;
  }

  .email-link::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
    z-index: -1;
  }

  .email-link:hover::before {
    width: 300px;
    height: 300px;
  }

  .email-link:hover {
    border-color: white;
  }

  @media (max-width: 768px) {
    .page-hero {
      min-height: 50vh;
    }

    .pricing-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .footer-cta {
      padding: 4rem 2rem;
    }

    .footer-cta h2 {
      font-size: 2rem;
    }

    .footer-cta p {
      font-size: 1.1rem;
    }

    .email-link {
      font-size: 1.1rem;
      padding: 1rem 2rem;
    }
  }

  @media (max-width: 400px) {
    .pricing-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
